"use strict";(self.webpackChunkJumppeak_Task=self.webpackChunkJumppeak_Task||[]).push([[871],{8871:(j,c,i)=>{i.r(c),i.d(c,{AuthModule:()=>x});var m=i(177),l=i(2655),g=i(2040),t=i(7705),s=i(4341),a=i(4262),h=i(8032),u=i.n(h),d=i(2840),y=i(9640);function C(e,f){if(1&e&&(t.j41(0,"div",16)(1,"small"),t.EFF(2),t.k0s()()),2&e){const n=t.XpG().$implicit,o=t.XpG();t.R7$(2),t.JRh(o.getFieldError(n.name))}}function b(e,f){if(1&e&&(t.j41(0,"div",12)(1,"label",13),t.EFF(2),t.k0s(),t.nrm(3,"input",14),t.DNE(4,C,3,1,"div",15),t.k0s()),2&e){const n=f.$implicit,o=t.XpG();t.R7$(1),t.Y8G("for",n.name),t.R7$(1),t.JRh(n.label),t.R7$(1),t.Y8G("type",n.type)("id",n.name)("formControlName",n.name),t.R7$(1),t.Y8G("ngIf",o.getFieldError(n.name))}}let v=(()=>{class e{constructor(n,o,r){this.auth=n,this.router=o,this.store=r,this.config=[],this.formType="login",this.formTypeChange=new t.bkB,this.errorMessage=null}ngOnChanges(n){(n.config||n.formType)&&this.initForm()}ngOnInit(){this.initForm()}initForm(){const n={};this.config.forEach(o=>{const r=[];o.required&&r.push(s.k0.required),"email"===o.type&&r.push(s.k0.email),"password"===o.name&&r.push(s.k0.minLength(8)),n[o.name]=new s.MJ("",r)}),this.form=new s.gE(n)}onSubmit(){if(this.form.invalid)return void this.markAllFieldsAsTouched();const n=this.form.value;"register"===this.formType?this.store.dispatch((0,a.DY)({user:n})):"login"===this.formType&&this.store.dispatch((0,a.Lx)({credentials:n})),this.form.reset()}loadUsers(){this.auth.getUsers().subscribe({next:n=>{this.store.dispatch((0,a.EK)({users:n}))},error:n=>this.handleError("Failed to load users",n)})}loadLoginLogs(){this.auth.getLoginLogs().subscribe({next:n=>{this.store.dispatch((0,a.O8)({logs:n}))},error:n=>this.handleError("Failed to load login logs",n)})}handleError(n,o){this.errorMessage=n,u().fire({icon:"error",title:"Oops...",text:n})}toggleForm(){this.formType="login"===this.formType?"register":"login",this.formTypeChange.emit(this.formType),this.form.reset(),this.errorMessage=null}markAllFieldsAsTouched(){Object.values(this.form.controls).forEach(n=>{n.markAsTouched()})}getFieldError(n){const o=this.form.get(n);if(o?.invalid&&o?.touched){if(o.errors?.required)return`${n} is required.`;if("email"===n&&o.errors?.email)return"Please enter a valid email address.";if("password"===n&&o.errors?.minlength)return"Password must be at least 8 characters long."}return null}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(d.u),t.rXU(l.Ix),t.rXU(y.il))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-dynamic-form"]],inputs:{config:"config",formType:"formType"},outputs:{formTypeChange:"formTypeChange"},features:[t.OA$],decls:18,vars:6,consts:[[1,"wrapper"],[1,"container"],[1,"row","justify-content-between","align-items-center"],[1,"col-lg-5","col-12","text-center","mb-4","mb-lg-0"],["src","assets/auth.jpg","alt","Authentication Image",1,"img-fluid"],[1,"col-lg-5","col-12"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],["class","mb-4",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","w-100"],[1,"text-center","mt-4"],["role","button",1,"btn","btn-link","text-decoration-none",3,"click"],[1,"mb-4"],[1,"form-label",3,"for"],[1,"form-control",3,"type","id","formControlName"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"img",4),t.k0s(),t.j41(5,"div",5)(6,"form",6),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(7,"h2",7),t.EFF(8),t.k0s(),t.DNE(9,b,5,6,"div",8),t.j41(10,"button",9),t.EFF(11),t.k0s()(),t.j41(12,"div",10)(13,"p"),t.EFF(14),t.k0s(),t.j41(15,"button",11),t.bIt("click",function(){return r.toggleForm()}),t.j41(16,"strong"),t.EFF(17),t.k0s()()()()()()()),2&o&&(t.R7$(6),t.Y8G("formGroup",r.form),t.R7$(2),t.JRh("login"===r.formType?"Login":"Register"),t.R7$(1),t.Y8G("ngForOf",r.config),t.R7$(2),t.SpI(" ","login"===r.formType?"Login":"Register"," "),t.R7$(3),t.SpI(" ","login"===r.formType?"Don't have an account?":"Already have an account?"," "),t.R7$(3),t.JRh("login"===r.formType?"Register":"Login"))},dependencies:[m.Sq,m.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".wrapper[_ngcontent-%COMP%]{height:80vh;display:flex;align-items:center;justify-content:center;padding:20px}.container[_ngcontent-%COMP%]{max-width:1200px}.row[_ngcontent-%COMP%]{align-items:center;justify-content:center}.form-label[_ngcontent-%COMP%]{font-weight:500;font-size:1.1rem}.form-control[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 6px #0000001a;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80}button[type=submit][_ngcontent-%COMP%]{border-radius:50px;font-size:1.1rem;padding:12px;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:10px}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.9rem}@media (max-width: 768px){.wrapper[_ngcontent-%COMP%]{height:auto}}"]})}}return e})();const F=[{path:"",component:(()=>{class e{constructor(){this.isLogin=!0,this.loginConfig=g.U,this.registerConfig=g.o}toggleForm(n){this.isLogin="login"===n}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],decls:2,vars:2,consts:[[1,"container","mt-5"],[3,"config","formType","formTypeChange"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"app-dynamic-form",1),t.bIt("formTypeChange",function(R){return r.toggleForm(R)}),t.k0s()()),2&o&&(t.R7$(1),t.Y8G("config",r.isLogin?r.loginConfig:r.registerConfig)("formType",r.isLogin?"login":"register"))},dependencies:[v],styles:[".app-dynamic-form[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s ease-in-out}.app-dynamic-form.ng-enter[_ngcontent-%COMP%]{opacity:1}.app-dynamic-form.ng-leave[_ngcontent-%COMP%]{opacity:0}"]})}}return e})()}];let T=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[l.iI.forChild(F),l.iI]})}}return e})();var M=i(3887),O=i(1626);let x=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.MD,T,M.G,O.q1]})}}return e})()}}]);